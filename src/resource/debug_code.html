<script>
    async function wyvr_fetch(path) {
        if (!path) {
            return null;
        }
        let response = null;
        try {
            response = await fetch(path + '?' + Date.now());
        } catch (e) {
            return null;
        }
        if (!response) {
            return null;
        }
        try {
            const data = await response.json();
            return data;
        } catch (e) {
            return null;
        }
    }
    async function wyvr_debug_inspect_data() {
        console.group('wyvr: Inspect data');
        if (!window.data) {
            window.data = await wyvr_fetch('{release_path}');
        }
        console.log(window.data);
        console.info('now available inside "data"');
        console.groupEnd();
    }
    async function wyvr_debug_inspect_global_data() {
        console.group('wyvr: Inspect global data');
        if (!window.global_data) {
            window.global_data = await wyvr_fetch('/_global.json');
        }
        console.log(window.global_data);
        console.info('now available inside "global_data"');
        console.groupEnd();
    }
    async function wyvr_debug_inspect_structure_data() {
        console.group('wyvr: Inspect structure');
        if (window.structure) {
            console.log(window.structure);
            console.groupEnd();
            return;
        }
        window.structure = await wyvr_fetch('/{identifier}.json');
        if (!window.structure) {
            console.warn('structure not available');
            console.info('in exec only is the structure not available');
            console.groupEnd();
            return;
        }
        // append shortcodes when available
        const shortcode_path = '{shortcode_path}';
        if (shortcode_path) {
            const shortcodes = await wyvr_fetch(shortcode_path + '.json');
            if (shortcodes) {
                window.structure.shortcodes = shortcodes;
            }
        }
        console.log(window.structure);
        console.info('now available inside "structure"');
        console.groupEnd();
    }
</script>
